<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load("upcoming", {packages:["timeline"]});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
	var container = document.getElementById('timeline-tooltip');
        var chart = new google.visualization.Timeline(container);
        var dataTable = new google.visualization.DataTable();

	dataTable.addColumn({ type: 'string', id: 'President' });
        dataTable.addColumn({ type: 'string', id: 'dummy bar label' });
        dataTable.addColumn({ type: 'string', role: 'tooltip' });
        dataTable.addColumn({ type: 'date', id: 'Start' });
        dataTable.addColumn({ type: 'date', id: 'End' });
	
dataTable.addRows([
[ 'Positive', null, 'Fam. 13.75 (To: Titus Titius; From: Cicero)', new Date('1951-03-01'), new Date((new Date('1951-03-01')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.2 (To: Atticus; From: Cicero)', new Date('1951-05-10'), new Date((new Date('1951-05-10')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.4 (To: Atticus; From: Cicero)', new Date('1951-05-12'), new Date((new Date('1951-05-12')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.5 (To: Atticus; From: Cicero)', new Date('1951-05-15'), new Date((new Date('1951-05-15')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.6 (To: Atticus; From: Cicero)', new Date('1951-05-18'), new Date((new Date('1951-05-18')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.7 (To: Atticus; From: Cicero)', new Date('1951-05-21'), new Date((new Date('1951-05-21')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Fam. 3.4 (To: Appius Claudius Pulcher; From: Cicero)', new Date('1951-06-05'), new Date((new Date('1951-06-05')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Fam. 2.8 (To: M. Caelius Rufus; From: Cicero)', new Date('1951-07-06'), new Date((new Date('1951-07-06')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.15 (To: Atticus; From: Cicero)', new Date('1951-08-03'), new Date((new Date('1951-08-03')).getTime() + 1400*60000) ],
[ 'Positive', null, 'Att. 5.18 (To: Atticus; From: Cicero)', new Date('1951-09-01'), new Date((new Date('1951-09-01')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Fam. 8.1 (To: Cicero; From: M. Caelius Rufus)', new Date('1951-06-01'), new Date((new Date('1951-06-01')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Att. 5.11 (To: Atticus; From: Cicero)', new Date('1951-07-06'), new Date((new Date('1951-07-06')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Att. 5.12 (To: Atticus; From: Cicero)', new Date('1951-07-01'), new Date((new Date('1951-07-01')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Fam. 8.4 (To: Cicero; From: M. Caelius Rufus)', new Date('1951-08-01'), new Date((new Date('1951-08-01')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Fam. 8.9 (To: M. Caelius Rufus; From: Cicero)', new Date('1951-09-02'), new Date((new Date('1951-09-02')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Att. 5.19 (To: Atticus; From: Cicero)', new Date('1951-09-20'), new Date((new Date('1951-09-20')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Fam. 8.8 (To: Cicero; From: M. Caelius Rufus)', new Date('1951-10-01'), new Date((new Date('1951-10-01')).getTime() + 1400*60000) ],
[ 'Neutral', null, 'Fam. 8.10 (To: Cicero; From: M. Caelius Rufus)', new Date('1951-11-15'), new Date((new Date('1951-11-15')).getTime() + 1400*60000) ],
[ 'Negative', null, 'Fam. 7.2 (To: M. Marius; From: Cicero)', new Date('1951-12-01'), new Date((new Date('1951-12-01')).getTime() + 1400*60000) ],
[ 'Negative', null, 'Fam. 3.8 (To: Appius Claudius Pulcher; From: Cicero)', new Date('1951-10-08'), new Date((new Date('1951-10-08')).getTime() + 1400*60000) ]]);
	      var options = {
		  title: "Sentiment towards Pompey in Cicero's Corresponsance",
		  timeline: {
		      showBarLabels: false
                  },
                  colors: ['#7CFC00', '#3498db', '#c0392b']
              };
              chart.draw(dataTable, options);


	      // When we have a select event, open the letter and deselect. 
	      function selectHandler(e) {
		  var selection = chart.getSelection();
		  if (selection.length > 0) {
		      var item = dataTable.getFormattedValue(selection[0].row, 2).split(" ");
		      window.open('http://perseus.uchicago.edu/perseus-cgi/citequery3.pl?dbname=PerseusLatinTexts&getid=1&query=Cic.%20' + item[0] + '%20' + item[1], '_blank');
		  }
		  //chart.setSelection(null);
	      }
	      google.visualization.events.addListener(chart, 'select', selectHandler);
	  }	  
      
  </script>
</head>
<body>
  <div id="timeline-tooltip" style="width: 1200px; height: 900px; margin: auto;"></div>
</body>
</html>
